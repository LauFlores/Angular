import{b as de}from"./chunk-YGP6L4NF.js";import{a as R}from"./chunk-ZKIY4GMV.js";import{a as zt,b as Gt,c as $t,d as Qt,e as qt,f as Ut,g as Jt,h as Kt,i as Wt,j as Xt,k as Yt,l as Zt,m as te,p as k,q as ee,r as T,s as ie,t as oe,u as re,v as ae,w as se,x as le,y as ce}from"./chunk-6FPKCUIG.js";import{a as D,b as It,f as O,g as Lt,h as P,i as yt,l as F,m as ne}from"./chunk-LEYBBSTR.js";import{f as me}from"./chunk-2QT6SZK3.js";import{a as wt}from"./chunk-LZDUOOG4.js";import{$a as J,Aa as n,Ac as st,Ba as o,Bc as lt,Ca as f,Cc as ct,Da as w,Dc as mt,Ea as I,Eb as ot,Ec as dt,Fc as ut,Ga as x,Gb as nt,Gc as pt,H as L,Hb as rt,Ic as Ct,Id as E,Ja as d,Jb as $,Jc as ft,Jd as Dt,La as c,Lc as _t,Md as Ot,N as v,Nd as Pt,O as y,Oa as Q,Od as Et,Pa as q,Pc as gt,Pd as kt,Qc as ht,Qd as Tt,Sa as H,Sc as xt,Sd as Ft,T as _,Ta as z,Tc as Mt,Td as Rt,U as g,Ua as G,Uc as vt,Ud as Vt,Vd as At,Wc as bt,Wd as Nt,Xa as U,Xd as jt,Ya as r,Yc as St,Yd as Bt,Za as b,Zd as Ht,_a as M,cb as K,da as s,db as W,ea as p,eb as X,fb as Y,ma as m,qb as Z,ra as C,vb as tt,wa as h,wb as et,xb as it,yc as S,zc as at}from"./chunk-RFUKYTJG.js";function he(e,i){e&1&&(n(0,"mat-error"),r(1,"Nombre es requerido"),o())}function xe(e,i){e&1&&(n(0,"mat-error"),r(1,"Descripcion es requerido"),o())}var V=class e{constructor(i,t,a){this.fb=i;this.dialogRef=t;this.data=a;this.courseForm=this.fb.group({name:[a?.name,null],description:[a?.description,null],imageURL:[a?.imageURL,null]})}courseForm;save(){this.courseForm.invalid?this.courseForm.markAllAsTouched():this.dialogRef.close(this.courseForm.value)}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||e)(p(bt),p(Rt),p(Vt))};static \u0275cmp=v({type:e,selectors:[["app-course-form"]],decls:23,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"main"],[3,"formGroup"],["matInput","","formControlName","name"],["rows","3","matInput","","formControlName","description"],["matInput","","formControlName","imageURL"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"cancel",3,"click"],["mat-button","",1,"save",3,"click","disabled"]],template:function(t,a){if(t&1&&(n(0,"h1",0),r(1),o(),n(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),r(6,"Nombre"),o(),f(7,"input",3),m(8,he,2,0,"mat-error"),o(),n(9,"mat-form-field")(10,"mat-label"),r(11,"Descripcion"),o(),f(12,"textarea",4),m(13,xe,2,0,"mat-error"),o(),n(14,"mat-form-field")(15,"mat-label"),r(16,"Imagen"),o(),f(17,"input",5),o()()(),n(18,"div",6)(19,"button",7),d("click",function(){return a.close()}),r(20,"Cancelar"),o(),n(21,"button",8),d("click",function(){return a.save()}),r(22,"Guardar"),o()()),t&2){let l,u;s(),b(a.data?a.data.name:"Nuevo Curso"),s(2),C("formGroup",a.courseForm),s(5),h((l=a.courseForm.get("name"))!=null&&l.invalid?8:-1),s(5),h((u=a.courseForm.get("description"))!=null&&u.invalid?13:-1),s(8),C("disabled",!a.courseForm.valid)}},dependencies:[xt,_t,gt,ht,Mt,vt,P,O,D,It,S,Nt,Bt,jt],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}"]})};var Ie=()=>[10,25,100],Le=e=>[e];function ye(e,i){e&1&&f(0,"mat-spinner",1)}function De(e,i){e&1&&(n(0,"th",19),r(1," Nombre"),o())}function Oe(e,i){if(e&1&&(n(0,"td",20),r(1),o()),e&2){let t=i.$implicit;s(),M(" ",t.name,"")}}function Pe(e,i){e&1&&(n(0,"th",19),r(1," Descripcion"),o())}function Ee(e,i){if(e&1&&(n(0,"td",20),r(1),o()),e&2){let t=i.$implicit;s(),M(" ",t.description,"")}}function ke(e,i){e&1&&(n(0,"th",21),r(1," Actualizado"),o())}function Te(e,i){if(e&1&&(n(0,"td",20),r(1),X(2,"date"),o()),e&2){let t=i.$implicit;s(),M(" ",Y(2,1,t.updatedAt)," ")}}function Fe(e,i){e&1&&(n(0,"th",21),r(1," Acciones"),o())}function Re(e,i){if(e&1){let t=x();n(0,"button",27),d("click",function(){_(t);let l=c().$implicit,u=c(2);return g(u.deleteCourse(l))}),n(1,"mat-icon"),r(2,"delete"),o()()}}function Ve(e,i){if(e&1){let t=x();n(0,"button",28),d("click",function(){_(t);let l=c().$implicit,u=c(2);return g(u.activateCourse(l))}),n(1,"mat-icon"),r(2,"settings_backup_restore"),o()()}}function Ae(e,i){if(e&1){let t=x();n(0,"td",20)(1,"div",22)(2,"button",23)(3,"mat-icon"),r(4,"visibility"),o()(),n(5,"button",24),d("click",function(){let l=_(t).$implicit,u=c(2);return g(u.openDialog(l))}),n(6,"mat-icon"),r(7,"edit"),o()(),m(8,Re,3,0,"button",25)(9,Ve,3,0,"button",26),o()()}if(e&2){let t=i.$implicit;s(2),C("routerLink",W(2,Le,t.id)),s(6),h(t.isActive?8:9)}}function Ne(e,i){e&1&&f(0,"tr",29)}function je(e,i){e&1&&f(0,"tr",30)}function Be(e,i){if(e&1&&(n(0,"tr",31)(1,"td",32),r(2),o()()),e&2){c();let t=U(10);s(2),M('No hay datos que coincidan con el filtro "',t.value,'"')}}function He(e,i){if(e&1){let t=x();n(0,"div",2)(1,"button",3),d("click",function(){_(t);let l=c();return g(l.openDialog(null))}),r(2," Agregar Curso "),o(),n(3,"mat-slide-toggle",4),d("change",function(l){_(t);let u=c();return g(u.toggleInactive(l))}),n(4,"span"),r(5,"Ver cursos inactivos "),o()()(),n(6,"mat-form-field")(7,"mat-label"),r(8,"Buscar"),o(),n(9,"input",5,0),d("keyup",function(l){_(t);let u=c();return g(u.applyFilter(l))}),o()(),n(11,"div",6)(12,"table",7),w(13,8),m(14,De,2,0,"th",9)(15,Oe,2,1,"td",10),I(),w(16,11),m(17,Pe,2,0,"th",9)(18,Ee,2,1,"td",10),I(),w(19,12),m(20,ke,2,0,"th",13)(21,Te,3,3,"td",10),I(),w(22,14),m(23,Fe,2,0,"th",13)(24,Ae,10,4,"td",10),I(),m(25,Ne,1,0,"tr",15)(26,je,1,0,"tr",16)(27,Be,3,1,"tr",17),o(),f(28,"mat-paginator",18),o()}if(e&2){let t=c();s(3),C("checked",t.showInactive),s(9),C("dataSource",t.dataSource),s(13),C("matHeaderRowDef",t.displayedColumns),s(),C("matRowDefColumns",t.displayedColumns),s(2),C("pageSizeOptions",K(5,Ie))}}var N=class e{constructor(i,t,a){this.coursesService=i;this.dialog=t;this.snackBar=a}displayedColumns=["nombre","descripcion","updatedAt","acciones"];dataSource=new te;isLoading=!1;showInactive=!1;paginator;sort;ngOnInit(){this.loadCourses()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadCourses(){this.isLoading=!0,this.showInactive?this.coursesService.getInactiveCourses().subscribe(i=>{this.dataSource.data=i,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1}):this.coursesService.getActiveCourses().subscribe(i=>{this.dataSource.data=i,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(i){this.dialog.open(V,{data:i||null,width:"500px",disableClose:!1}).afterClosed().subscribe({next:a=>{a&&(i?(this.updateCourse(i.id,a),this.snackBar.open("Curso actualizado","Cerrar",{duration:3e3})):(this.addCourse(a),this.snackBar.open("Curso creado","Cerrar",{duration:3e3})))}})}updateCourse(i,t){this.isLoading=!0,this.coursesService.updateCourse(i,t).subscribe({next:a=>{this.dataSource.data=a,this.loadCourses()},complete:()=>{this.isLoading=!1}})}addCourse(i){this.isLoading=!0,this.coursesService.createCourse(i).subscribe({next:t=>{this.dataSource.data=t,this.loadCourses()},complete:()=>{this.isLoading=!1}})}deleteCourse(i){this.isLoading=!0,this.coursesService.deleteCourse(i.id).subscribe({next:t=>{this.dataSource.data=t,this.loadCourses(),this.snackBar.open("Curso eliminado","Cerrar",{duration:3e3})},complete:()=>{this.isLoading=!1}})}toggleInactive(i){this.showInactive=i.checked,this.loadCourses()}activateCourse(i){this.isLoading=!0,this.coursesService.activateCourse(i.id).subscribe({next:t=>{this.dataSource.data=t,this.loadCourses()},complete:()=>{this.isLoading=!1,this.snackBar.open("Curso activado","Cerrar",{duration:3e3})}})}static \u0275fac=function(t){return new(t||e)(p(R),p(At),p(wt))};static \u0275cmp=v({type:e,selectors:[["app-course-list"]],viewQuery:function(t,a){if(t&1&&(H(k,5),H(T,5)),t&2){let l;z(l=G())&&(a.paginator=l.first),z(l=G())&&(a.sort=l.first)}},decls:5,vars:1,consts:[["input",""],[1,"spinner"],[1,"controls"],["mat-raised-button","",1,"demo-button",3,"click"],["labelPosition","before",3,"change","checked"],["matInput","","placeholder","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","updatedAt"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of courses",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"actions"],["mat-icon-button","","aria-label","View button",1,"view-icon",3,"routerLink"],["mat-icon-button","","aria-label","Edit button",1,"edit-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon"],["mat-icon-button","","aria-label","Delete button",1,"restore-icon"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"restore-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,a){t&1&&(n(0,"section")(1,"h1"),r(2,"Lista de Cursos"),o(),m(3,ye,1,0,"mat-spinner",1)(4,He,29,6),o()),t&2&&(s(3),h(a.isLoading?3:4))},dependencies:[rt,P,O,D,F,S,at,re,zt,$t,Jt,Qt,Gt,Kt,qt,Ut,Wt,Xt,Yt,E,k,T,ie,tt],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.delete-icon[_ngcontent-%COMP%]{color:#c12}.edit-icon[_ngcontent-%COMP%]{color:#fc0}.view-icon[_ngcontent-%COMP%]{color:#09f}.restore-icon[_ngcontent-%COMP%]{color:#25c717}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}@media screen and (max-width: 500px){.controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}section[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.mat-mdc-form-field[_ngcontent-%COMP%]{overflow:hidden}"]})};function ze(e,i){e&1&&(n(0,"div",1),f(1,"mat-spinner",3),o())}function Ge(e,i){if(e&1&&f(0,"img",4),e&2){let t=c(2);Q("ngSrc",t.course.imageURL),q("alt","Curso ",t.course.name,"")}}function $e(e,i){if(e&1&&(n(0,"div",5),r(1),o()),e&2){let t=c(2);s(),J(" ",t.course.name.charAt(0),"",t.course.name.charAt(1)," ")}}function Qe(e,i){if(e&1){let t=x();n(0,"mat-card",2)(1,"mat-card-header"),m(2,Ge,1,3,"img",4)(3,$e,2,2,"div",5),n(4,"div")(5,"mat-card-title"),r(6),o(),n(7,"mat-card-subtitle")(8,"mat-chip-listbox")(9,"mat-chip",6),r(10),o()()()()(),n(11,"mat-card-content")(12,"mat-list")(13,"mat-list-item")(14,"mat-icon",7),r(15,"person"),o(),n(16,"span",8),r(17,"Nombre"),o(),n(18,"span",9),r(19),o()(),n(20,"mat-list-item")(21,"mat-icon",7),r(22,"event"),o(),n(23,"span",8),r(24,"Descripcion"),o(),n(25,"span",9),r(26),o()()()(),n(27,"mat-card-actions")(28,"button",10),d("click",function(){_(t);let l=c();return g(l.goBack())}),n(29,"mat-icon"),r(30,"arrow_back"),o(),r(31," Volver al listado "),o(),n(32,"button",10),d("click",function(){_(t);let l=c();return g(l.goToClasses())}),n(33,"mat-icon"),r(34,"arrow_forward"),o(),r(35," Ver las Clases "),o()()()}if(e&2){let t=c();s(2),h(t.course.imageURL?2:3),s(4),b(t.course.name),s(3),C("ngClass",t.course.isActive?"green-chip":"red-chip"),s(),M(" ",t.course.isActive?"Activo":"Inactivo"," "),s(9),b(t.course.name),s(7),b(t.course.description)}}var j=class e{constructor(i,t,a){this.route=i;this.coursesService=t;this.router=a}courseID;course;isLoading=!1;ngOnInit(){this.route.params.subscribe(i=>{this.courseID=i.id,this.loadCourse()})}loadCourse(){this.isLoading=!0,this.coursesService.getCourseById(this.courseID).subscribe({next:i=>{this.course=i,this.isLoading=!1},error:i=>{console.error(i),this.isLoading=!1}})}goBack(){this.router.navigate(["/courses"]).then()}goToClasses(){this.router.navigate(["/courses",this.course.id,"classes"]).then()}static \u0275fac=function(t){return new(t||e)(p(ot),p(R),p(nt))};static \u0275cmp=v({type:e,selectors:[["app-course-detail"]],decls:3,vars:1,consts:[[1,"course-info-container"],[1,"loading-spinner"],[1,"course-card"],["diameter","50"],["width","100","height","100",3,"ngSrc","alt"],["mat-card-avatar","",1,"course-avatar"],[3,"ngClass"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["mat-raised-button","","color","primary",3,"click"]],template:function(t,a){t&1&&(n(0,"section",0),m(1,ze,2,0,"div",1)(2,Qe,36,6,"mat-card",2),o()),t&2&&(s(),h(a.isLoading?1:2))},dependencies:[Z,F,se,le,kt,Tt,Et,Pt,Ot,S,E,lt,ut,Ct,mt,pt,dt,ct,it],styles:[".student-info-container[_ngcontent-%COMP%], .course-info-container[_ngcontent-%COMP%], .class-info-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.student-card[_ngcontent-%COMP%], .not-found-card[_ngcontent-%COMP%], .course-card[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%]{max-width:900px;width:100%}.student-avatar[_ngcontent-%COMP%], .course-avatar[_ngcontent-%COMP%], .class-avatar[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#09f;color:#fff;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:lighter;margin:16px}mat-card-content[_ngcontent-%COMP%]{margin-top:20px}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:16px}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;gap:16px}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%}.course-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0}mat-card[_ngcontent-%COMP%]{background-color:#e5e5e522}.mdc-evolution-chip-set__chips[_ngcontent-%COMP%]{display:flex;justify-content:center}.green-chip[_ngcontent-%COMP%]{color:#0de50d}.red-chip[_ngcontent-%COMP%]{color:#de1212}.student-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.courses-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-top:16px}mat-card-header[_ngcontent-%COMP%]{padding:16px}.course-card[_ngcontent-%COMP%]{cursor:pointer}.course-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #0003;transform:scale(1.02);background-color:#e5e5e51a}"]})};var qe=[{path:"",component:N},{path:":id",component:j},{path:":id/classes",component:de}],B=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=y({type:e});static \u0275inj=L({imports:[$.forChild(qe),$]})};var Ce=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=y({type:e});static \u0275inj=L({imports:[et,B,St,me,yt,ne,ce,Ft,st,ae,Lt,Zt,Dt,ee,oe,Ht,ft]})};export{Ce as CoursesModule};
