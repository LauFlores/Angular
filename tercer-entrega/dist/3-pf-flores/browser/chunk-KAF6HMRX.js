import{a as De,c as Ie}from"./chunk-6S7YQ2B2.js";import{a as we}from"./chunk-ZKIY4GMV.js";import{a as re,b as le,c as de,d as me,e as se,f as ce,g as ue,h as pe,i as fe,j as _e,k as ge,l as Ce,m as Se,p as X,q as ve,r as Y,s as he,t as xe,u as be,v as Ee,w as ye,x as Oe,y as Pe}from"./chunk-6FPKCUIG.js";import{a as $,b as Yt,f as U,g as Zt,h as H,i as te,l as Z,m as Me}from"./chunk-LEYBBSTR.js";import{f as ke}from"./chunk-2QT6SZK3.js";import{a as Xt}from"./chunk-LZDUOOG4.js";import{$a as ct,Aa as o,Ac as At,Ba as n,Bc as Tt,Ca as f,Cc as Ft,Da as y,Dc as Nt,Ea as O,Eb as Pt,Ec as Rt,Fc as Vt,G as gt,Ga as D,Gb as kt,Gc as jt,H as F,Hb as B,Ic as Bt,Id as z,J as Ct,Ja as u,Jb as ut,Jc as $t,Jd as ee,Kd as ie,La as m,Lc as Ut,N as E,Nc as T,O as N,Oa as Mt,Od as ne,Pa as bt,Pc as Ht,Q as St,Qa as Et,Qc as zt,Sa as dt,Sc as qt,Sd as oe,T as C,Ta as mt,Tc as Gt,Td as q,U as S,Ua as st,Uc as Qt,Ud as G,Vd as Q,Wc as Jt,Wd as J,Xa as Dt,Xd as K,Ya as a,Yc as Kt,Yd as W,Za as v,Zc as Wt,Zd as ae,_a as h,a as at,b as rt,cb as wt,da as l,db as R,ea as s,eb as x,fb as P,gb as V,l as M,ma as c,n as lt,ra as _,t as b,vb as j,wa as g,wb as It,xa as vt,xb as yt,ya as ht,yb as Ot,yc as w,za as xt,zc as Lt}from"./chunk-RFUKYTJG.js";var k=class i{transform(e){return`${e.lastName.toUpperCase()}, ${e.firstName}`}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=St({name:"fullName",type:i,pure:!0})};function Ve(i,e){i&1&&(o(0,"mat-error"),a(1,"Nombre es requerido"),n())}function je(i,e){i&1&&(o(0,"mat-error"),a(1,"Apellido es requerido"),n())}function Be(i,e){i&1&&(o(0,"mat-error"),a(1,"Email es requerido"),n())}var Ae="form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}",tt=class i{constructor(e,t,r){this.fb=e;this.dialogRef=t;this.data=r;this.studentForm=this.fb.group({firstName:[r?.firstName,T.required],lastName:[r?.lastName,T.required],email:[r?.email,[T.email,T.required]]})}studentForm;save(){this.studentForm.invalid?this.studentForm.markAllAsTouched():this.dialogRef.close(this.studentForm.value)}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||i)(s(Jt),s(q),s(G))};static \u0275cmp=E({type:i,selectors:[["app-student-form"]],decls:25,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"main"],[3,"formGroup"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"cancel",3,"click"],["mat-button","",1,"save",3,"click","disabled"]],template:function(t,r){if(t&1&&(o(0,"h1",0),a(1),x(2,"fullName"),n(),o(3,"div",1)(4,"form",2)(5,"mat-form-field")(6,"mat-label"),a(7,"Nombre"),n(),f(8,"input",3),c(9,Ve,2,0,"mat-error"),n(),o(10,"mat-form-field")(11,"mat-label"),a(12,"Apellido"),n(),f(13,"input",4),c(14,je,2,0,"mat-error"),n(),o(15,"mat-form-field")(16,"mat-label"),a(17,"Email"),n(),f(18,"input",5),c(19,Be,2,0,"mat-error"),n()()(),o(20,"div",6)(21,"button",7),u("click",function(){return r.close()}),a(22,"Cancelar"),n(),o(23,"button",8),u("click",function(){return r.save()}),a(24,"Guardar"),n()()),t&2){let d,p,A;l(),v(r.data?P(2,6,r.data):"Nuevo Alumno"),l(3),_("formGroup",r.studentForm),l(5),g((d=r.studentForm.get("firstName"))!=null&&d.invalid?9:-1),l(5),g((p=r.studentForm.get("lastName"))!=null&&p.invalid?14:-1),l(5),g((A=r.studentForm.get("email"))!=null&&A.invalid?19:-1),l(4),_("disabled",!r.studentForm.valid)}},dependencies:[qt,Ut,Ht,zt,Gt,Qt,U,$,Yt,H,J,W,K,w,k],styles:[Ae,Ae]})};var et=class i{constructor(e,t){this.dialogRef=e;this.data=t}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||i)(s(q),s(G))};static \u0275cmp=E({type:i,selectors:[["app-confirm-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title","",1,"titulo"],[2,"white-space","pre-line"],[1,"actions"],["mat-button","",3,"click"],["mat-button","",1,"confirm",3,"click"]],template:function(t,r){t&1&&(o(0,"h2",0),a(1),n(),o(2,"mat-dialog-content",1),a(3),n(),o(4,"mat-dialog-actions",2)(5,"button",3),u("click",function(){return r.onCancel()}),a(6,"Cancelar"),n(),o(7,"button",4),u("click",function(){return r.onConfirm()}),a(8,"Aceptar"),n()()),t&2&&(l(),v(r.data.title),l(2),h(" ",r.data.message,`
`))},dependencies:[w,J,W,K],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.confirm[_ngcontent-%COMP%]{color:#be2323;background-color:#7a000021}.titulo[_ngcontent-%COMP%]{color:#bd9d9d}","form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}"]})};var L=class i{constructor(e){this.httpClient=e}apiUrl=Wt.API_URL;getActiveStudents(){return this.httpClient.get(`${this.apiUrl}/students`).pipe(lt(e=>e.filter(t=>t.isActive)),b(e=>(console.error("Error al obtener los alumnos activos:",e),M(()=>new Error("No se pudieron obtener los alumnos activos")))))}deleteStudent(e){return this.httpClient.patch(`${this.apiUrl}/students/${e}`,{isActive:!1,updatedAt:new Date}).pipe(b(t=>(console.error("Error al eliminar el alumno:",t),M(()=>new Error("No se pudo eliminar el alumno")))))}updateStudent(e,t){let r=rt(at({},t),{updatedAt:new Date});return this.httpClient.patch(`${this.apiUrl}/students/${e}`,r).pipe(b(d=>(console.error("Error al actualizar el alumno:",d),M(()=>new Error("No se pudo actualizar el alumno")))))}createStudent(e){let t=rt(at({},e),{isActive:!0,createdAt:new Date,updatedAt:new Date});return this.httpClient.post(`${this.apiUrl}/students`,t).pipe(b(r=>(console.error("Error al crear el alumno:",r),M(()=>new Error("No se pudo crear el alumno")))))}activateStudent(e){return this.httpClient.patch(`${this.apiUrl}/students/${e}`,{isActive:!0}).pipe(b(t=>(console.error("Error al activar el alumno:",t),M(()=>new Error("No se pudo activar el alumno")))))}getInactiveStudents(){return this.httpClient.get(`${this.apiUrl}/students`).pipe(lt(e=>e.filter(t=>!t.isActive)),b(e=>M(()=>new Error("No se pudieron obtener los alumnos inactivos"))))}getStudentById(e){return this.httpClient.get(`${this.apiUrl}/students/${e}`).pipe(b(t=>M(()=>new Error("Alumno no encontrado"))))}static \u0275fac=function(t){return new(t||i)(Ct(Ot))};static \u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"})};var qe=()=>[10,25,100],Ge=i=>[i];function Qe(i,e){i&1&&f(0,"mat-spinner",1)}function Je(i,e){i&1&&(o(0,"th",20),a(1," Apellido"),n())}function Ke(i,e){if(i&1&&(o(0,"td",21),a(1),n()),i&2){let t=e.$implicit;l(),h(" ",t.lastName,"")}}function We(i,e){i&1&&(o(0,"th",20),a(1," Nombre"),n())}function Xe(i,e){if(i&1&&(o(0,"td",21),a(1),n()),i&2){let t=e.$implicit;l(),h(" ",t.firstName,"")}}function Ye(i,e){i&1&&(o(0,"th",20),a(1," Email"),n())}function Ze(i,e){if(i&1&&(o(0,"td",21),a(1),n()),i&2){let t=e.$implicit;l(),h(" ",t.email,"")}}function ti(i,e){i&1&&(o(0,"th",20),a(1,"Actualizado"),n())}function ei(i,e){if(i&1&&(o(0,"td",21),a(1),x(2,"date"),n()),i&2){let t=e.$implicit;l(),h(" ",P(2,1,t.updatedAt),"")}}function ii(i,e){i&1&&(o(0,"th",22),a(1," Acciones"),n())}function ni(i,e){if(i&1){let t=D();o(0,"button",28),u("click",function(){C(t);let d=m().$implicit,p=m(2);return S(p.confirmDeletion(d))}),o(1,"mat-icon"),a(2,"delete"),n()()}}function oi(i,e){if(i&1){let t=D();o(0,"button",29),u("click",function(){C(t);let d=m().$implicit,p=m(2);return S(p.confirmActivation(d))}),o(1,"mat-icon"),a(2,"settings_backup_restore"),n()()}}function ai(i,e){if(i&1){let t=D();o(0,"td",21)(1,"div",23)(2,"button",24)(3,"mat-icon"),a(4,"visibility"),n()(),o(5,"button",25),u("click",function(){let d=C(t).$implicit,p=m(2);return S(p.openDialog(d))}),o(6,"mat-icon"),a(7,"edit"),n()(),c(8,ni,3,0,"button",26)(9,oi,3,0,"button",27),n()()}if(i&2){let t=e.$implicit;l(2),_("routerLink",R(2,Ge,t.id)),l(6),g(t.isActive?8:9)}}function ri(i,e){i&1&&f(0,"tr",30)}function li(i,e){i&1&&f(0,"tr",31)}function di(i,e){if(i&1&&(o(0,"tr",32)(1,"td",33),a(2),n()()),i&2){m();let t=Dt(10);l(2),h('No hay datos que coincidan con el filtro "',t.value,'"')}}function mi(i,e){if(i&1){let t=D();o(0,"div",2)(1,"button",3),u("click",function(){C(t);let d=m();return S(d.openDialog(null))}),a(2," Agregar Alumno "),n(),o(3,"mat-slide-toggle",4),u("change",function(d){C(t);let p=m();return S(p.toggleInactive(d))}),o(4,"span"),a(5,"Ver usuarios inactivos "),n()()(),o(6,"mat-form-field")(7,"mat-label"),a(8,"Buscar"),n(),o(9,"input",5,0),u("keyup",function(d){C(t);let p=m();return S(p.applyFilter(d))}),n()(),o(11,"div",6)(12,"table",7),y(13,8),c(14,Je,2,0,"th",9)(15,Ke,2,1,"td",10),O(),y(16,11),c(17,We,2,0,"th",9)(18,Xe,2,1,"td",10),O(),y(19,12),c(20,Ye,2,0,"th",9)(21,Ze,2,1,"td",10),O(),y(22,13),c(23,ti,2,0,"th",9)(24,ei,3,3,"td",10),O(),y(25,14),c(26,ii,2,0,"th",15)(27,ai,10,4,"td",10),O(),c(28,ri,1,0,"tr",16)(29,li,1,0,"tr",17)(30,di,3,1,"tr",18),n(),f(31,"mat-paginator",19),n()}if(i&2){let t=m();l(3),_("checked",t.showInactive),l(9),_("dataSource",t.dataSource),l(16),_("matHeaderRowDef",t.displayedColumns),l(),_("matRowDefColumns",t.displayedColumns),l(2),_("pageSizeOptions",wt(5,qe))}}var it=class i{constructor(e,t,r){this.studentsService=e;this.dialog=t;this.snackBar=r}displayedColumns=["apellido","nombre","email","updatedAt","actions"];dataSource=new Se;isLoading=!1;showInactive=!1;paginator;sort;ngOnInit(){this.loadStudents()}loadStudents(){this.isLoading=!0,this.showInactive?this.studentsService.getInactiveStudents().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1}):this.studentsService.getActiveStudents().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(e){this.dialog.open(tt,{data:e||null,width:"800px",disableClose:!1}).afterClosed().subscribe({next:r=>{r&&(e?(this.updateAlumno(e.id,r),this.snackBar.open("Alumno actualizado","Cerrar",{duration:3e3})):(this.addAlumno(r),this.snackBar.open("Alumno creado","Cerrar",{duration:3e3})))}})}deleteStudent(e){this.isLoading=!0,this.studentsService.deleteStudent(e.id).subscribe({next:t=>{this.dataSource.data=t,this.loadStudents()},complete:()=>{this.isLoading=!1,this.snackBar.open("Alumno eliminado","Cerrar",{duration:3e3})}})}activateStudent(e){this.isLoading=!0,this.studentsService.activateStudent(e.id).subscribe({next:t=>{this.dataSource.data=t,this.loadStudents()},complete:()=>{this.isLoading=!1,this.snackBar.open("Alumno activado","Cerrar",{duration:3e3})}})}updateAlumno(e,t){this.isLoading=!0,this.studentsService.updateStudent(e,t).subscribe({next:r=>{this.dataSource.data=r,this.loadStudents()},complete:()=>{this.isLoading=!1}})}addAlumno(e){this.isLoading=!0,this.studentsService.createStudent(e).subscribe({next:t=>{this.dataSource.data=t},complete:()=>{this.isLoading=!1}})}toggleInactive(e){this.showInactive=e.checked,this.loadStudents()}openConfirmationDialog(e,t,r,d){this.dialog.open(et,{data:{title:t,message:r}}).afterClosed().subscribe(A=>{A&&d()})}confirmDeletion(e){this.openConfirmationDialog(e,"Eliminar alumno","\xBFEst\xE1 seguro de que desea eliminar alumno?",()=>this.deleteStudent(e))}confirmActivation(e){this.openConfirmationDialog(e,"Reactivar alumno","\xBFEst\xE1 seguro de que desea activar alumno?",()=>this.activateStudent(e))}static \u0275fac=function(t){return new(t||i)(s(L),s(Q),s(Xt))};static \u0275cmp=E({type:i,selectors:[["app-student-list"]],viewQuery:function(t,r){if(t&1&&(dt(X,5),dt(Y,5)),t&2){let d;mt(d=st())&&(r.paginator=d.first),mt(d=st())&&(r.sort=d.first)}},decls:5,vars:1,consts:[["input",""],[1,"spinner"],[1,"controls"],["mat-raised-button","",1,"demo-button",3,"click"],["labelPosition","before",3,"change","checked"],["matInput","","placeholder","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","apellido"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","email"],["matColumnDef","updatedAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"actions"],["mat-icon-button","","aria-label","View button",1,"view-icon",3,"routerLink"],["mat-icon-button","","aria-label","Edit button",1,"edit-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon"],["mat-icon-button","","aria-label","Delete button",1,"restore-icon"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"restore-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,r){t&1&&(o(0,"section")(1,"h1"),a(2,"Lista de Alumnos"),n(),c(3,Qe,1,0,"mat-spinner",1)(4,mi,32,6),n()),t&2&&(l(3),g(r.isLoading?3:4))},dependencies:[B,U,$,H,Z,be,z,re,de,ue,me,le,pe,se,ce,fe,_e,ge,Y,he,X,w,Lt,j],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.delete-icon[_ngcontent-%COMP%]{color:#c12}.edit-icon[_ngcontent-%COMP%]{color:#fc0}.view-icon[_ngcontent-%COMP%]{color:#09f}.restore-icon[_ngcontent-%COMP%]{color:#25c717}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}@media screen and (max-width: 500px){.controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}section[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.mat-mdc-form-field[_ngcontent-%COMP%]{overflow:hidden}"]})};var si=i=>["/dashboard/courses",i];function ci(i,e){i&1&&(o(0,"div",1),f(1,"mat-spinner",2),n())}function ui(i,e){if(i&1&&f(0,"img",5),i&2){let t=m(3);Et("alt","Student ",t.student.firstName," ",t.student.lastName,"")}}function pi(i,e){if(i&1&&(o(0,"div",6),a(1),n()),i&2){let t=m(3);l(),ct(" ",t.student.firstName.charAt(0),"",t.student.lastName.charAt(0)," ")}}function fi(i,e){if(i&1&&(o(0,"mat-card",14)(1,"p"),a(2),n(),o(3,"mat-card-header"),f(4,"img",15),o(5,"mat-card-title"),a(6),n(),o(7,"mat-card-subtitle"),a(8),x(9,"date"),n()()()),i&2){let t=e.$implicit;_("routerLink",R(10,si,t.courseId)),l(2),h("/courses/",t.courseId,""),l(2),Mt("ngSrc",t.courseImageURL),bt("alt","Curso ",t.courseName,""),l(2),v(t.courseName),l(2),v(V(9,7,t.enrollmentDate,"mediumDate"))}}function _i(i,e){if(i&1&&(o(0,"div",11),ht(1,fi,10,12,"mat-card",14,vt),n()),i&2){let t=m(3);l(),xt(t.enrollments)}}function gi(i,e){i&1&&(o(0,"p"),a(1,"El estudiante no est\xE1 inscrito en ning\xFAn curso."),n())}function Ci(i,e){if(i&1){let t=D();o(0,"mat-card",3)(1,"mat-card-header"),c(2,ui,1,3,"img",5)(3,pi,2,2,"div",6),o(4,"div")(5,"mat-card-title"),a(6),x(7,"fullName"),n(),o(8,"mat-card-subtitle")(9,"mat-chip-listbox")(10,"mat-chip",7),a(11),n()()()()(),o(12,"mat-card-content")(13,"div",8)(14,"div",9)(15,"mat-icon",10),a(16,"person"),n(),o(17,"div")(18,"strong"),a(19,"Nombre completo"),n(),o(20,"p"),a(21),n()()(),o(22,"div",9)(23,"mat-icon",10),a(24,"email"),n(),o(25,"div")(26,"strong"),a(27,"Email"),n(),o(28,"p"),a(29),n()()(),o(30,"div",9)(31,"mat-icon",10),a(32,"event"),n(),o(33,"div")(34,"strong"),a(35,"Fecha de Registro"),n(),o(36,"p"),a(37),x(38,"date"),n()()(),o(39,"div",9)(40,"mat-icon",10),a(41,"update"),n(),o(42,"div")(43,"strong"),a(44,"Fecha de Actualizaci\xF3n"),n(),o(45,"p"),a(46),x(47,"date"),n()()()(),f(48,"mat-divider"),o(49,"h3"),a(50,"Cursos Inscritos"),n(),c(51,_i,3,0,"div",11)(52,gi,2,0,"p"),n(),o(53,"mat-card-actions",12)(54,"button",13),u("click",function(){C(t);let d=m(2);return S(d.goBack())}),o(55,"mat-icon"),a(56,"arrow_back"),n(),a(57," Volver al listado "),n(),o(58,"button",13),u("click",function(){C(t);let d=m(2);return S(d.openEnrollmentForm())}),o(59,"mat-icon"),a(60,"add"),n(),a(61," Inscribir "),n()()()}if(i&2){let t=m(2);l(2),g(2),l(4),v(P(7,10,t.student)),l(4),_("color",t.student.isActive?"accent":"warn"),l(),h(" ",t.student.isActive?"Activo":"Inactivo"," "),l(10),ct("",t.student.firstName," ",t.student.lastName,""),l(8),v(t.student.email),l(8),v(V(38,12,t.student.createdAt,"medium")),l(9),v(V(47,15,t.student.updatedAt,"medium")),l(5),g(t.enrollments&&t.enrollments.length>0?51:52)}}function Si(i,e){if(i&1){let t=D();o(0,"mat-card",4)(1,"mat-card-header")(2,"mat-card-title"),a(3,"Estudiante no encontrado"),n()(),o(4,"mat-card-content")(5,"p"),a(6,"Lo sentimos, no se pudo encontrar la informaci\xF3n del estudiante."),n()(),o(7,"mat-card-actions",12)(8,"button",13),u("click",function(){C(t);let d=m(2);return S(d.goBack())}),o(9,"mat-icon"),a(10,"arrow_back"),n(),a(11," Volver al listado "),n()()()}}function vi(i,e){if(i&1&&c(0,Ci,62,18,"mat-card",3)(1,Si,12,0,"mat-card",4),i&2){let t=m();g(t.student?0:1)}}var nt=class i{constructor(e,t,r,d,p,A){this.route=e;this.studentsService=t;this.enrollmentService=r;this.courseService=d;this.router=p;this.dialog=A}studentID;student;enrollments;isLoading=!1;ngOnInit(){this.route.params.subscribe(e=>{this.studentID=e.id,this.loadStudent(),this.loadEnrollments()})}loadStudent(){this.isLoading=!0,this.studentsService.getStudentById(this.studentID).subscribe({next:e=>{this.student=e,this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1}})}goBack(){this.router.navigate(["/students"])}openEnrollmentForm(){this.dialog.open(Ie,{data:{studentId:this.studentID}}).afterClosed().subscribe(t=>{t&&this.loadEnrollments()})}loadEnrollments(){this.enrollmentService.getEnrollmentsByStudentId(this.studentID).subscribe({next:e=>{this.courseService.getActiveCourses().subscribe({next:t=>{this.enrollments=e.map(r=>{let d=t.find(p=>p.id===r.courseId);return{courseId:r.courseId,studentId:this.student.id,courseName:d?.imageURL?d.name:"Curso no encontrado",courseImageURL:d?d.imageURL:"https://via.placeholder.com/150",enrollmentDate:r.enrollmentDate}})},error:t=>{console.error(t)}})},error:e=>{console.error(e)}})}static \u0275fac=function(t){return new(t||i)(s(Pt),s(L),s(De),s(we),s(kt),s(Q))};static \u0275cmp=E({type:i,selectors:[["app-student-detail"]],decls:3,vars:1,consts:[[1,"student-info-container"],[1,"loading-spinner"],["diameter","50"],[1,"student-card"],[1,"not-found-card"],["ngSrc","student.png","width","100","height","100",3,"alt"],["mat-card-avatar","",1,"student-avatar"],["selected","",3,"color"],[1,"student-info"],[1,"info-item"],["matListItemIcon",""],[1,"courses-grid"],["align","end"],["mat-raised-button","","color","primary",3,"click"],[1,"course-card",3,"routerLink"],["mat-card-avatar","","width","100","height","100",3,"ngSrc","alt"]],template:function(t,r){t&1&&(o(0,"section",0),c(1,ci,2,0,"div",1)(2,vi,2,1),n()),t&2&&(l(),g(r.isLoading?1:2))},dependencies:[B,Z,z,w,Tt,Vt,Bt,Nt,jt,Rt,Ft,ye,Oe,ne,ie,yt,j,k],styles:[".student-info-container[_ngcontent-%COMP%], .course-info-container[_ngcontent-%COMP%], .class-info-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.student-card[_ngcontent-%COMP%], .not-found-card[_ngcontent-%COMP%], .course-card[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%]{max-width:900px;width:100%}.student-avatar[_ngcontent-%COMP%], .course-avatar[_ngcontent-%COMP%], .class-avatar[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#09f;color:#fff;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:lighter;margin:16px}mat-card-content[_ngcontent-%COMP%]{margin-top:20px}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:16px}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;gap:16px}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%}.course-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0}mat-card[_ngcontent-%COMP%]{background-color:#e5e5e522}.mdc-evolution-chip-set__chips[_ngcontent-%COMP%]{display:flex;justify-content:center}.green-chip[_ngcontent-%COMP%]{color:#0de50d}.red-chip[_ngcontent-%COMP%]{color:#de1212}.student-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.courses-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-top:16px}mat-card-header[_ngcontent-%COMP%]{padding:16px}.course-card[_ngcontent-%COMP%]{cursor:pointer}.course-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #0003;transform:scale(1.02);background-color:#e5e5e51a}"]})};var hi=[{path:"",component:it},{path:":id",component:nt},{path:":id/enrollments",loadChildren:()=>import("./chunk-KZRKLIOW.js").then(i=>i.EnrollmentsModule)}],ot=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=N({type:i});static \u0275inj=F({imports:[ut.forChild(hi),ut]})};var Fe=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=N({type:i});static \u0275inj=F({imports:[It,ot,Kt,ke,Zt,te,Me,Ee,ee,Ce,xe,ve,ae,At,$t,Pe,oe]})};export{Fe as StudentsModule};
