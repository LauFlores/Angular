<mat-card appearance="outlined" class="register-container">
    <mat-card-header>
        <mat-card-title>
            Registro de Usuario
        </mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <mat-form-field appearance="outline">
                <mat-label>Nombre</mat-label>
                <input matInput formControlName="firstName" placeholder="Ingrese su nombre">
                <mat-icon matSuffix>person</mat-icon>
                @if (registerForm.get('firstName')?.hasError('required') && registerForm.get('firstName')?.touched) {
                    <mat-error>El nombre es requerido</mat-error>
                }
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Apellido</mat-label>
                <input matInput formControlName="lastName" placeholder="Ingrese su apellido">
                <mat-icon matSuffix>person</mat-icon>
                @if (registerForm.get('lastName')?.hasError('required') && registerForm.get('lastName')?.touched) {
                    <mat-error>El apellido es requerido</mat-error>
                }
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" placeholder="ejemplo@correo.com">
                <mat-icon matSuffix>email</mat-icon>
                @if (registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched) {
                    <mat-error>El email es requerido</mat-error>
                } @else if (registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched) {
                    <mat-error>Por favor, ingrese un email válido</mat-error>
                }
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Contraseña</mat-label>
                <input
                        matInput
                        [type]="hidePassword ? 'password' : 'text'"
                        formControlName="password"
                        placeholder="Ingrese su contraseña"
                        autocomplete="new-password"
                >
                <button
                        mat-icon-button
                        matSuffix
                        (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Ocultar contraseña'"
                        [attr.aria-pressed]="hidePassword"
                >
                    <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                @if (registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched) {
                    <mat-error>La contraseña es requerida</mat-error>
                } @else if (registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched) {
                    <mat-error>La contraseña debe tener al menos 8 caracteres</mat-error>
                }
            </mat-form-field>
            <div class="actions">
                <button mat-stroked-button color="accent" routerLink="/login">
                    <mat-icon>login</mat-icon>
                    Login
                </button>
                <button mat-flat-button color="primary" type="submit">
                    <mat-icon>person_add</mat-icon>
                    Registrarse
                </button>
            </div>
        </form>
    </mat-card-content>
</mat-card>
