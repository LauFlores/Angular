import{f as oe}from"./chunk-RANOMYMH.js";import{b as ne}from"./chunk-3Z5D5GJ3.js";import{A as Gt,D as k,E as Qt,F as qt,G as zt,H as R,I as $t,J as Jt,K as Kt,L as Ut,M as Wt,N as Xt,O as Yt,P as Zt,Q as te,R as ee,S as ie,a as E,b as wt,d as O,e as yt,f as P,g as It,h as Dt,i as Lt,j as Et,k as Ot,l as Pt,m as Tt,n as Ft,o as kt,p as Rt,q as Vt,r as At,s as Nt,t as jt,w as T,x as Bt,y as F,z as Ht}from"./chunk-WF5PKYIA.js";import{$a as K,Aa as o,Ad as bt,Ba as C,Bb as q,Bd as St,Ca as I,Da as D,Fa as S,G as w,Ia as m,Ka as c,M as h,N as y,Oa as H,Pa as G,Qa as Q,S as _,T as g,Ta as z,Ua as r,Va as v,Wa as x,Xa as $,_a as J,bd as ot,ca as s,da as d,fd as nt,gd as rt,id as at,jd as st,kd as lt,la as u,mb as U,md as mt,nd as ct,od as dt,pd as ut,qa as p,qc as L,qd as pt,rc as tt,rd as ft,sb as W,sc as b,sd as Ct,tc as et,uc as it,ud as _t,va as M,vd as gt,wb as X,wd as Mt,xd as ht,yb as Y,yd as vt,za as n,zb as Z,zd as xt}from"./chunk-MTDPIWLV.js";function de(i,e){i&1&&(n(0,"mat-error"),r(1,"Nombre es requerido"),o())}function ue(i,e){i&1&&(n(0,"mat-error"),r(1,"Descripcion es requerido"),o())}var V=class i{constructor(e,t,a){this.fb=e;this.dialogRef=t;this.data=a;this.courseForm=this.fb.group({name:[a?.name,null],description:[a?.description,null]})}courseForm;save(){this.courseForm.invalid?this.courseForm.markAllAsTouched():this.dialogRef.close(this.courseForm.value)}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||i)(d(mt),d(gt),d(Mt))};static \u0275cmp=h({type:i,selectors:[["app-course-form"]],decls:19,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"main"],[3,"formGroup"],["matInput","","formControlName","name"],["matInput","","formControlName","description"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"cancel",3,"click"],["mat-button","",1,"save",3,"click","disabled"]],template:function(t,a){if(t&1&&(n(0,"h1",0),r(1),o(),n(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),r(6,"Nombre"),o(),C(7,"input",3),u(8,de,2,0,"mat-error"),o(),n(9,"mat-form-field")(10,"mat-label"),r(11,"Descripcion"),o(),C(12,"input",4),u(13,ue,2,0,"mat-error"),o()()(),n(14,"div",5)(15,"button",6),m("click",function(){return a.close()}),r(16,"Cancelar"),o(),n(17,"button",7),m("click",function(){return a.save()}),r(18,"Guardar"),o()()),t&2){let l,f;s(),v(a.data?a.data.name:"Nuevo Curso"),s(2),p("formGroup",a.courseForm),s(5),M((l=a.courseForm.get("name"))!=null&&l.invalid?8:-1),s(5),M((f=a.courseForm.get("description"))!=null&&f.invalid?13:-1),s(4),p("disabled",!a.courseForm.valid)}},dependencies:[at,ot,nt,rt,st,lt,P,O,E,wt,b,vt,bt,xt],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}"]})};var ge=()=>[10,25,100],Me=i=>[i];function he(i,e){i&1&&C(0,"mat-spinner",1)}function ve(i,e){i&1&&(n(0,"th",18),r(1," Nombre"),o())}function xe(i,e){if(i&1&&(n(0,"td",19),r(1),o()),i&2){let t=e.$implicit;s(),x(" ",t.name,"")}}function be(i,e){i&1&&(n(0,"th",18),r(1," Descripcion"),o())}function Se(i,e){if(i&1&&(n(0,"td",19),r(1),o()),i&2){let t=e.$implicit;s(),x(" ",t.description,"")}}function we(i,e){i&1&&(n(0,"th",20),r(1," Acciones"),o())}function ye(i,e){if(i&1){let t=S();n(0,"td",19)(1,"div",21)(2,"button",22)(3,"mat-icon"),r(4,"visibility"),o()(),n(5,"button",23),m("click",function(){let l=_(t).$implicit,f=c(2);return g(f.openDialog(l))}),n(6,"mat-icon"),r(7,"edit"),o()(),n(8,"button",24),m("click",function(){let l=_(t).$implicit,f=c(2);return g(f.deleteCourse(l))}),n(9,"mat-icon"),r(10,"delete"),o()()()()}if(i&2){let t=e.$implicit;s(2),p("routerLink",K(1,Me,t.id))}}function Ie(i,e){i&1&&C(0,"tr",25)}function De(i,e){i&1&&C(0,"tr",26)}function Le(i,e){if(i&1&&(n(0,"tr",27)(1,"td",28),r(2),o()()),i&2){c();let t=z(10);s(2),x('No hay datos que coincidan con el filtro "',t.value,'"')}}function Ee(i,e){if(i&1){let t=S();n(0,"div",2)(1,"button",3),m("click",function(){_(t);let l=c();return g(l.openDialog(null))}),r(2," Agregar Curso "),o(),n(3,"mat-slide-toggle",4),m("change",function(l){_(t);let f=c();return g(f.toggleInactive(l))}),n(4,"span"),r(5,"Ver cursos inactivos "),o()()(),n(6,"mat-form-field")(7,"mat-label"),r(8,"Buscar"),o(),n(9,"input",5,0),m("keyup",function(l){_(t);let f=c();return g(f.applyFilter(l))}),o()(),n(11,"div",6)(12,"table",7),I(13,8),u(14,ve,2,0,"th",9)(15,xe,2,1,"td",10),D(),I(16,11),u(17,be,2,0,"th",9)(18,Se,2,1,"td",10),D(),I(19,12),u(20,we,2,0,"th",13)(21,ye,11,3,"td",10),D(),u(22,Ie,1,0,"tr",14)(23,De,1,0,"tr",15)(24,Le,3,1,"tr",16),o(),C(25,"mat-paginator",17),o()}if(i&2){let t=c();s(12),p("dataSource",t.dataSource),s(10),p("matHeaderRowDef",t.displayedColumns),s(),p("matRowDefColumns",t.displayedColumns),s(2),p("pageSizeOptions",J(4,ge))}}var N=class i{constructor(e,t){this.coursesService=e;this.dialog=t}displayedColumns=["nombre","descripcion","acciones"];dataSource=new jt;isLoading=!1;showInactive=!1;paginator;sort;ngOnInit(){this.loadCourses()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadCourses(){this.isLoading=!0,this.showInactive?this.coursesService.getInactiveCourses().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1}):this.coursesService.getActiveCourses().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(e){this.dialog.open(V,{data:e||null,width:"500px",disableClose:!1}).afterClosed().subscribe({next:a=>{a&&(e?this.updateCourse(e.id,a):this.addCourse(a))}})}updateCourse(e,t){this.isLoading=!0,this.coursesService.updateCourse(e,t).subscribe({next:a=>{this.dataSource.data=a},complete:()=>{this.isLoading=!1}})}addCourse(e){this.isLoading=!0,this.coursesService.addCourse(e).subscribe({next:t=>{this.dataSource.data=t},complete:()=>{this.isLoading=!1}})}deleteCourse(e){this.isLoading=!0,this.coursesService.deleteCourse(e.id).subscribe({next:t=>{this.dataSource.data=t},complete:()=>{this.isLoading=!1}})}toggleInactive(e){this.showInactive=e.checked,this.loadCourses()}static \u0275fac=function(t){return new(t||i)(d(R),d(ht))};static \u0275cmp=h({type:i,selectors:[["app-course-list"]],viewQuery:function(t,a){if(t&1&&(H(T,5),H(F,5)),t&2){let l;G(l=Q())&&(a.paginator=l.first),G(l=Q())&&(a.sort=l.first)}},decls:5,vars:1,consts:[["input",""],[1,"spinner"],[1,"controls"],["mat-raised-button","",1,"demo-button",3,"click"],["disabled","true","labelPosition","before",3,"change"],["matInput","","placeholder","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of courses",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"actions"],["mat-icon-button","","aria-label","View button",1,"view-icon",3,"routerLink"],["mat-icon-button","","aria-label","Edit button",1,"edit-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,a){t&1&&(n(0,"section")(1,"h1"),r(2,"Lista de Cursos"),o(),u(3,he,1,0,"mat-spinner",1)(4,Ee,26,5),o()),t&2&&(s(3),M(a.isLoading?3:4))},dependencies:[Z,P,O,E,k,b,et,qt,Dt,Et,Ft,Ot,Lt,kt,Pt,Tt,Rt,Vt,At,L,T,F,Ht],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.delete-icon[_ngcontent-%COMP%]{color:#c12}.edit-icon[_ngcontent-%COMP%]{color:#fc0}.view-icon[_ngcontent-%COMP%]{color:#09f}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}@media screen and (max-width: 500px){.controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}section[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.mat-mdc-form-field[_ngcontent-%COMP%]{overflow:hidden}"]})};function Oe(i,e){i&1&&(n(0,"div",1),C(1,"mat-spinner",3),o())}function Pe(i,e){if(i&1){let t=S();n(0,"mat-card",2)(1,"mat-card-header")(2,"div",4),r(3),o(),n(4,"div")(5,"mat-card-title"),r(6),o(),n(7,"mat-card-subtitle")(8,"mat-chip-listbox")(9,"mat-chip",5),r(10),o()()()()(),n(11,"mat-card-content")(12,"mat-list")(13,"mat-list-item")(14,"mat-icon",6),r(15,"person"),o(),n(16,"span",7),r(17,"Nombre"),o(),n(18,"span",8),r(19),o()(),n(20,"mat-list-item")(21,"mat-icon",6),r(22,"event"),o(),n(23,"span",7),r(24,"Descripcion"),o(),n(25,"span",8),r(26),o()()()(),n(27,"mat-card-actions")(28,"button",9),m("click",function(){_(t);let l=c();return g(l.goBack())}),n(29,"mat-icon"),r(30,"arrow_back"),o(),r(31," Volver al listado "),o(),n(32,"button",9),m("click",function(){_(t);let l=c();return g(l.goToClasses())}),n(33,"mat-icon"),r(34,"arrow_forward"),o(),r(35," Ver las Clases "),o()()()}if(i&2){let t=c();s(3),$(" ",t.course.name.charAt(0),"",t.course.name.charAt(1)," "),s(3),v(t.course.name),s(3),p("ngClass",t.course.isActive?"green-chip":"red-chip"),s(),x(" ",t.course.isActive?"Activo":"Inactivo"," "),s(9),v(t.course.name),s(7),v(t.course.description)}}var j=class i{constructor(e,t,a){this.route=e;this.coursesService=t;this.router=a}courseID;course;isLoading=!1;ngOnInit(){this.route.params.subscribe(e=>{this.courseID=+e.id,this.loadCourse()})}loadCourse(){this.isLoading=!0,this.coursesService.getCourseById(this.courseID).subscribe({next:e=>{this.course=e,this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1}})}goBack(){this.router.navigate(["/courses"]).then()}goToClasses(){this.router.navigate(["/courses",this.course.id,"classes"]).then()}static \u0275fac=function(t){return new(t||i)(d(X),d(R),d(Y))};static \u0275cmp=h({type:i,selectors:[["app-course-detail"]],decls:3,vars:1,consts:[[1,"course-info-container"],[1,"loading-spinner"],[1,"course-card"],["diameter","50"],["mat-card-avatar","",1,"course-avatar"],[3,"ngClass"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["mat-raised-button","","color","primary",3,"click"]],template:function(t,a){t&1&&(n(0,"section",0),u(1,Oe,2,0,"div",1)(2,Pe,36,7,"mat-card",2),o()),t&2&&(s(),M(a.isLoading?1:2))},dependencies:[U,k,te,ee,ft,Ct,pt,ut,dt,b,L,$t,Wt,Yt,Kt,Xt,Ut,Jt],styles:[".student-info-container[_ngcontent-%COMP%], .course-info-container[_ngcontent-%COMP%], .class-info-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.student-card[_ngcontent-%COMP%], .not-found-card[_ngcontent-%COMP%], .course-card[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%]{max-width:900px;width:100%}.student-avatar[_ngcontent-%COMP%], .course-avatar[_ngcontent-%COMP%], .class-avatar[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#09f;color:#fff;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:lighter;margin:16px}mat-card-content[_ngcontent-%COMP%]{margin-top:20px}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:16px}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;gap:16px}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}mat-card[_ngcontent-%COMP%]{background-color:#e5e5e522}.mdc-evolution-chip-set__chips[_ngcontent-%COMP%]{display:flex;justify-content:center}.green-chip[_ngcontent-%COMP%]{color:#0de50d}.red-chip[_ngcontent-%COMP%]{color:#de1212}"]})};var Te=[{path:"",component:N},{path:":id",component:j},{path:":id/classes",component:ne}],B=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=y({type:i});static \u0275inj=w({imports:[q.forChild(Te),q]})};var se=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=y({type:i});static \u0275inj=w({imports:[W,B,ct,oe,It,Qt,ie,_t,it,zt,yt,Nt,tt,Bt,Gt,St,Zt]})};export{se as CoursesModule};
